define("caregg/o2o/0.1.0/views/home/CommonView",["jquery/1.10.1/jquery","underscore/1.6.0/underscore","CarEgg","..\\..\\collections\\home\\MenuItemCollection","arale-cookie/1.1.0/index","..\\..\\models\\home\\MenuItem","..\\..\\templates\\home\\leftSideMenu.tpl","..\\..\\templates\\home\\settingMenu.tpl"],function(require,exports,module){function extendSubMenu(children,menuCfg){return children.length>0?void _.each(children,function(child){menuCfg[child.oprFuncCode]&&(_.extend(child,menuCfg[child.oprFuncCode]),console.log(menuCfg[child.oprFuncCode].menuName+" = "+menuCfg[child.oprFuncCode].path)),extendSubMenu(child.children,menuCfg)}):!0}function extendMenu(models){var menuCfg=CarEgg.constant.SYS_MENU_CFG;return _.each(models,function(model){menuCfg[model.get("oprFuncCode")]&&(_.extend(model.attributes,menuCfg[model.get("oprFuncCode")]),extendSubMenu(model.get("children"),menuCfg))})}function handleMenu(models,type){var settingMenuCode="100";return"leftSide"==type?extendMenu(models.reject(function(model){return model.get("oprFuncCode")==settingMenuCode})):"setting"==type?extendMenu(models.filter(function(model){return model.get("oprFuncCode")==settingMenuCode})):void 0}var $=require("jquery/1.10.1/jquery"),_=require("underscore/1.6.0/underscore"),CarEgg=require("CarEgg"),MenuItemCollection=require("../../collections/home/MenuItemCollection"),leftMenuTpl=require("../../templates/home/leftSideMenu.tpl"),settingMenuTpl=require("../../templates/home/settingMenu.tpl"),LeftSideMenu=CarEgg.View.extend({el:".left-sidebar-menu",render:function(){var that=this;0==$(that.el).children().length&&that.initialMenus()},initialMenus:function(){var menuItems=new MenuItemCollection;menuItems.fetch({success:function(menuItems){$(".left-sidebar-menu").html(_.template(leftMenuTpl,{menuItems:handleMenu(menuItems,"leftSide"),_:_})),$(".caregg-multilevel-menu-v1").delegate("a","click",function(e){var menuItem=$(e.currentTarget||e.srcElement);menuItem.next("ul").length>0&&menuItem.toggleClass("on"),0==menuItem.siblings().length&&window.mainTab.switchTo(2)}),$(".menu-dropdown-box.setting-dropdown-box").html(_.template(settingMenuTpl,{menuItems:handleMenu(menuItems,"setting"),_:_}))},error:function(response){console.log(response,"LeftSideMenu render error!")}})}});module.exports=LeftSideMenu}),define("caregg/o2o/0.1.0/collections/home/MenuItemCollection",["jquery/1.10.1/jquery","underscore/1.6.0/underscore","CarEgg","arale-cookie/1.1.0/index","caregg/o2o/0.1.0/models/home/MenuItem"],function(require,exports,module){var CarEgg=(require("jquery/1.10.1/jquery"),require("underscore/1.6.0/underscore"),require("CarEgg")),Cookie=require("arale-cookie/1.1.0/index"),MenuItem=require("caregg/o2o/0.1.0/models/home/MenuItem"),MenuItemCollection=CarEgg.Collection.extend({url:CarEgg.constant.ROOT_PATH+"/opr/OprFunction/queryFuncByName/"+Cookie.get("userName"),model:MenuItem});module.exports=MenuItemCollection}),define("caregg/o2o/0.1.0/models/home/MenuItem",["jquery/1.10.1/jquery","underscore/1.6.0/underscore","CarEgg"],function(require,exports,module){var CarEgg=(require("jquery/1.10.1/jquery"),require("underscore/1.6.0/underscore"),require("CarEgg")),MenuItem=CarEgg.Model.extend({defaults:{oprFuncCode:"",oprFuncName:""}});module.exports=MenuItem}),define("caregg/o2o/0.1.0/templates/home/leftSideMenu.tpl",[],'<% _.each(menuItems, function(menuItem) { %>\n<li>\n    <span class="caregg-ico <%= menuItem.get(\'className\') %>"><i class="icon-chevron-right"></i></span>\n    <span class="menu-item-name"><%= menuItem.get(\'menuName\') || menuItem.get(\'oprFuncName\') %></span>\n    <% if( menuItem.get(\'children\').length > 0 ){ %>\n        <!-- 一级菜单列表 -->\n        <ul class=\'caregg-multilevel-menu-v1\'>\n            <% _.each( menuItem.get(\'children\'), function(menuItemL1) { %>\n            <li>\n            <% if( menuItemL1["children"].length > 0 ){ %>\n                <!-- 二级菜单列表 -->\n                <a><%= menuItemL1.menuName || menuItemL1.oprFuncName %><span class="arrow"></span></a>\n                <ul class=\'sub-menu\'>\n                    <% _.each( menuItemL1["children"], function(menuItemL2) { %>\n                    <li>\n                        <% if( menuItemL2["children"].length > 0 ){ %>\n                            <a><%= menuItemL2.menuName || menuItemL2.oprFuncName %><span class="arrow"></span></a>\n                            <!-- 三级菜单列表 -->\n                            <ul class=\'sub-menu\'>\n                                <% _.each( menuItemL2["children"], function(menuItemL3) { %>\n                                    <li><a href="<%= menuItemL3.path ? menuItemL3.path : "javascript:void(0);" %>"><%= menuItemL3.menuName || menuItemL3.oprFuncName %></a></li>\n                                <% }); %>\n                            </ul>\n                        <% }else{ %>\n                            <a href="<%= menuItemL2.path ? menuItemL2.path : "javascript:void(0);" %>"><%= menuItemL2.menuName || menuItemL2.oprFuncName %></a>\n                        <% } %>\n                    </li>\n                    <% }); %>\n                </ul>\n            <% }else{ %>\n                <a href="<%= menuItemL1.path ? menuItemL1.path : "javascript:void(0);" %>"><%= menuItemL1.menuName || menuItemL1.oprFuncName %></a>\n            <% } %>\n            </li>\n            <% }); %>\n        </ul>\n    <% } %>\n</li>\n<% }); %>\n'),define("caregg/o2o/0.1.0/templates/home/settingMenu.tpl",[],'<i class="caregg-bubble-spike"></i>\n<ul>\n    <% _.each( menuItems[0].get("children"), function(menuItem) { %>\n    <li><a><%= menuItem.oprFuncName %></a></li>\n    <% }); %>\n</ul>');